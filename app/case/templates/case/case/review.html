{% extends "case/_base.html" %}
{% block title %}Case Review Queue{% endblock %}

{% block content %}
<div class="ui container">
    {% if alert_issues %}
        <div class="ui segment inverted red tertiary padded" style="margin-bottom: 3rem;">
            <h2 class="ui header">
                Checks Missing
                <div class="sub header">
                    {{ alert_issues|length }} active cases are missing a conflict or eligibility check.
                </div>
            </h2>
            <a href="{% url 'case-checks' %}">
                <button class="ui button red">View</button>
            </a>
        </div>
    {% endif %}
    <div style="display: flex;gap: 5rem;justify-content: space-between"">
        <h1 class="ui header">
            Case Review Queue
            <div class="sub header">
                All open and assigned cases, sorted by next review date.
            </div>
        </h1>
        <form 
            style="width: 400px;"
            id="search-form"
            class="ui form"
            hx-get="{% url 'case-review-search' %}"
            hx-target="#review-table"
            hx-swap="outerHTML"
            hx-trigger="change, keyup delay:0.3s"
        >
            {% include 'case/forms/_dropdown_field.html' with field=form.lawyer %}
        </form>
    </div>
    <script>
    $('.selection.dropdown').dropdown()
    $('#search-form').on('submit', e => e.preventDefault())
    </script>
    {% include "case/case/_list_table.html" with table_id="review-table" issues=issues is_review=True is_open=True %}
</div>
{% endblock %}
