{% comment %} 
is_review is True when this is showing case reviews
is_open is True when all cases are open
{% endcomment %}
<table class="ui celled table" id="{{ table_id }}">
    <thead>
        <tr>
            <th>File Ref</th>
            <th>Topic</th>
            <th>Client</th>
            <th>Paralegal</th>
            {% if is_review %}
                <th>Lawyer</th>
                <th>Next Review Due</th>
            {% endif %}
            <th>Created</th>
            <th>Stage</th>
            <th>Advice</th>
            {% if not is_open %}
                <th>Outcome</th>
            {% endif %}
            {% if is_inbox %}
                <th style="text-align: center">Conflict Check<br>Performed</th>
                <th style="text-align: center">Eligibility Check<br>Performed</th>
            {% endif %}
        </tr>
    </thead>
    <tbody>
    {% for issue in issues %}
        <tr>
            <td>
                <a href="{% url 'case-detail-view' issue.pk %}">
                    {{ issue.fileref }}
                </a>
            </td>
            <td>{{ issue.get_topic_display }}</td>
            <td>
                <a href="{% url 'client-detail' issue.client.pk %}">
                    {{ issue.client.get_full_name|title }}
                </a>                    
            </td>
            <td>
                {% if issue.paralegal %}
            
                <a href="{% url 'account-user-detail' issue.paralegal.pk %}">
                    {{ issue.paralegal.get_full_name|title }}
                </a>               
                {% else %}
                    -
                {% endif %}
            </td>
            {% if is_review %}
                <td>
                    {% if issue.lawyer %}
                
                    <a href="{% url 'account-user-detail' issue.lawyer.pk %}">
                        {{ issue.lawyer.get_full_name|title }}
                    </a>               
                    {% else %}
                        -
                    {% endif %}
                </td>
                <td class="center aligned {{ issue.color }}">
                    {{ issue.next_review|date:"d/m/y" }}
                </td>
            {% endif %}
            <td>{{ issue.created_at|date:"d/m/y" }}</td>
            <td>{{issue.get_stage_display|default:"-" }}</td>
            <td class="center aligned">
                {% if issue.provided_legal_services %}
                    <i class="green checkmark icon"></i>
                {% else %}
                    <i class="yellow close icon"></i>
                {% endif %}
            </td>
            {% if not is_open %}
                <td>{{issue.get_outcome_display|default:"-" }}</td>
            {% endif %}
            {% if  is_inbox %}
                <td class="center aligned">
                    {% if issue.is_conflict_check %}
                        <i class="green checkmark icon"></i>
                    {% else %}
                        <i class="yellow close icon"></i>
                    {% endif %}
                </td>
                <td class="center aligned">
                    {% if issue.is_eligibility_check %}
                        <i class="green checkmark icon"></i>
                    {% else %}
                        <i class="yellow close icon"></i>
                    {% endif %}
                </td>
            {% endif %}
        </tr>
    {% empty %}
        <tr>
            <td>
                No cases found
            </td>
        </tr>
    {% endfor %}
    </tbody>
</table>
